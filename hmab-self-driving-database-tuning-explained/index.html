<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="_PLYlFzfO_lGMbNMlE69Ud5LJ2P-BhbJvR-3-_oXzIw"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>HMAB: Teaching Databases to Tune Themselves | Romesh Malinga Perera</title> <meta name="author" content="R. Malinga Perera"> <meta name="description" content="A simple explanation of how HMAB uses machine learning to automatically optimize database performance"> <meta name="keywords" content="R. Malinga Perera, AWS, Amazon, Researcher, University of Melbourne"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favi.png?04973ede2ae0fe2e2b3f25d362982959"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://www.malinga.me/hmab-self-driving-database-tuning-explained/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Romesh Malinga Perera</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/resume/">Resume</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">HMAB: Teaching Databases to Tune Themselves</h1> <p class="post-meta">January 3, 2026</p> <p class="post-tags"> <a href="/2026"> <i class="fas fa-calendar fa-sm"></i> 2026 </a>   ·   <a href="/tag/research"> <i class="fas fa-hashtag fa-sm"></i> research</a>   <a href="/tag/databases"> <i class="fas fa-hashtag fa-sm"></i> databases</a>   <a href="/tag/machine-learning"> <i class="fas fa-hashtag fa-sm"></i> machine-learning</a>     ·   <a href="/category/research"> <i class="fas fa-tag fa-sm"></i> research</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/images/DBA-Bandit-Self-driving-index-tuning-under-ad-hoc-analytical-workloads-with-safety-guarantees-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/images/DBA-Bandit-Self-driving-index-tuning-under-ad-hoc-analytical-workloads-with-safety-guarantees-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/images/DBA-Bandit-Self-driving-index-tuning-under-ad-hoc-analytical-workloads-with-safety-guarantees-1400.webp"></source> <img src="/assets/images/DBA-Bandit-Self-driving-index-tuning-under-ad-hoc-analytical-workloads-with-safety-guarantees.png" class="img-fluid rounded z-depth-1 mx-auto d-block" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>If you’ve ever worked with databases, you know they can be finicky. The same database can run a query in seconds or hours depending on how it’s set up. Traditionally, this optimization has been the job of specialized database administrators (DBAs) who spend countless hours tweaking settings and creating “indexes” and “materialized views”—special structures that help databases find data faster.</p> <p>But what if the database could learn to optimize itself?</p> <h2 id="the-problem-database-tuning-is-hard">The Problem: Database Tuning is Hard</h2> <p>Imagine you’re organizing a massive library. You could arrange books alphabetically by title, by author, or by subject. Each arrangement makes some searches faster and others slower. Now imagine the library has millions of books, and people are constantly asking for different combinations of books. How do you organize it?</p> <p>This is essentially what happens in databases. <strong>Indexes</strong> are like card catalogs that help you find specific information quickly. <strong>Materialized views</strong> are like pre-organized reading lists for common requests. Creating the right combination of these structures is crucial for performance, but it’s incredibly complex:</p> <ul> <li>There are often millions of possible configurations</li> <li>Traditional tools rely on the database’s “cost estimator,” which is frequently wrong</li> <li>Workloads change over time—what worked yesterday might not work today</li> <li>Creating these structures takes time and resources</li> </ul> <h2 id="enter-hmab-a-smarter-approach">Enter HMAB: A Smarter Approach</h2> <p>HMAB (Hierarchical Multi-Armed Bandits) takes a fundamentally different approach. Instead of relying on estimates, it <strong>learns from experience</strong>.</p> <h3 id="the-multi-armed-bandit-analogy">The Multi-Armed Bandit Analogy</h3> <p>The name comes from a classic problem in machine learning: imagine you’re in a casino with multiple slot machines (one-armed bandits). Each machine has a different, unknown payout rate. How do you figure out which machines are best while maximizing your winnings?</p> <p>You face a dilemma:</p> <ul> <li> <strong>Explore</strong>: Try different machines to learn which are best</li> <li> <strong>Exploit</strong>: Keep playing the machines that have worked well so far</li> </ul> <p>HMAB applies this same principle to database tuning. It strategically explores different configurations (indexes and views) while exploiting what it has learned to keep performance high.</p> <h3 id="how-hmab-works">How HMAB Works</h3> <p>HMAB uses a clever two-layer hierarchy:</p> <p><strong>Layer 1: Specialists</strong></p> <ul> <li>Multiple specialized “bandits” each focus on a specific area</li> <li>One set handles materialized views for the entire database</li> <li>Another set handles indexes, with one specialist per table</li> <li>Each specialist recommends candidate structures</li> </ul> <p><strong>Layer 2: The Coordinator</strong></p> <ul> <li>Takes all the candidates from Layer 1</li> <li>Decides which combination to actually use</li> <li>Learns which structures work well together</li> </ul> <p>This hierarchy is powerful because:</p> <ol> <li> <strong>It’s modular</strong>: You can add or remove specialists without disrupting the system</li> <li> <strong>It’s efficient</strong>: Specialists can run in parallel on multi-core systems</li> <li> <strong>It learns from reality</strong>: Instead of trusting the database’s estimates, HMAB creates structures and observes actual performance</li> </ol> <h3 id="a-smart-optimization-hypothetical-checks">A Smart Optimization: Hypothetical Checks</h3> <p>Creating database structures is expensive. HMAB reduces this cost with a clever trick: before actually creating a structure, it asks the database optimizer, “Would you even use this?” If the answer is no, HMAB skips creation entirely, saving up to 58% of creation time.</p> <p>This hybrid approach gets the best of both worlds: learning from real execution while avoiding unnecessary work.</p> <h2 id="the-results-impressive-gains">The Results: Impressive Gains</h2> <p>We tested HMAB against state-of-the-art commercial database tuning tools using industry-standard benchmarks (TPC-H, TPC-DS, and real-world datasets like IMDb). The results were striking:</p> <ul> <li> <strong>Up to 96% performance improvement</strong> over commercial tools on complex workloads</li> <li> <strong>91% gain</strong> on modern analytical benchmarks (TPC-DS)</li> <li> <strong>Strong performance on dynamic workloads</strong> where queries constantly change—a scenario where traditional tools struggle</li> </ul> <p>Even on uniform datasets where traditional tools excel, HMAB remains competitive while offering far better performance on the skewed, messy data that real-world systems actually encounter.</p> <h3 id="why-traditional-tools-struggle">Why Traditional Tools Struggle</h3> <p>Traditional tools have two main problems:</p> <ol> <li> <strong>They rely on estimates</strong>: Database optimizers estimate query costs, but these estimates can be wildly wrong, especially with complex queries or skewed data</li> <li> <strong>They need representative workloads</strong>: You have to tell them what queries to optimize for—but in dynamic systems, workloads constantly change</li> </ol> <p>HMAB sidesteps both issues by continuously learning from actual execution.</p> <h2 id="what-this-means-for-the-future">What This Means for the Future</h2> <p>HMAB represents a shift toward <strong>self-driving databases</strong>. Instead of requiring expert DBAs to constantly monitor and tune systems, databases can learn to optimize themselves.</p> <p>This is particularly important as:</p> <ul> <li> <strong>Cloud databases</strong> serve unpredictable, multi-tenant workloads</li> <li> <strong>Data becomes more skewed and complex</strong>, breaking traditional optimizer assumptions</li> <li> <strong>Real-time analytics</strong> demand constant adaptation to changing query patterns</li> </ul> <p>The system even comes with <strong>provable performance guarantees</strong>—something rare in machine learning approaches—ensuring it won’t make things catastrophically worse while learning.</p> <h2 id="the-technical-innovation">The Technical Innovation</h2> <p>For those interested in the technical details, HMAB introduces several innovations:</p> <ul> <li> <strong>Hierarchical Multi-Armed Bandits</strong>: A novel bandit architecture that extends contextual and combinatorial bandits into a hierarchy, enabling efficient handling of massive action spaces while leveraging parallel processing</li> <li> <strong>Context design</strong>: Each specialist uses a compact representation of database features, allowing efficient learning</li> <li> <strong>Reward structure</strong>: The system learns from both execution time improvements and creation costs</li> <li> <strong>Hierarchical architecture</strong>: The first system to holistically tune multiple types of physical design structures (indexes AND views) using machine learning</li> </ul> <h2 id="try-it-yourself">Try It Yourself</h2> <p>The code is available as an artifact for the research community. Whether you’re a database administrator curious about automated tuning, a researcher working on database optimization, or a developer dealing with slow queries, HMAB demonstrates that databases can indeed learn to tune themselves.</p> <hr> <p><strong>Read the full paper</strong>: <a href="https://www.vldb.org/pvldb/vol16/p216-perera.pdf" rel="external nofollow noopener" target="_blank">HMAB: Self-Driving Hierarchy of Bandits for Integrated Physical Database Design Tuning</a> published in PVLDB 2022.</p> <p><strong>Authors</strong>: R. Malinga Perera, Bastian Oetomo, Benjamin I. P. Rubinstein, and Renata Borovica-Gajic from the University of Melbourne.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/reading-and-understanding-the-storm-ui-storm-ui-explained/">Reading and Understanding the Storm UI [Storm UI explained]</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/application-aware-sharding-for-a-mysql-database/">Application Aware Sharding for a MySQL Database</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/evolution-of-a-data-platform/">Evolution of a Data Platform</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/continuous-data-loading-from-mysql-to-hive-using-tungsten/">Continuous data loading from MySQL to Hive [Using Tungsten]</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/tpc-h-htap-workload-skewed-datasets/">TPC-H HTAP: INSERT, UPDATE, DELETE Queries for Skewed Datasets</a> </li> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2026 R. Malinga Perera. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-DZBX7PNSL8"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DZBX7PNSL8");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>